# Generic problem parser adapter
# Supports most common problem formats in Korean education materials

name: "generic"
description: "Generic parser for common Korean problem formats"
priority: 1

# Question detection patterns (regex)
question_patterns:
  # Standard numbered formats
  - '^\s*\d+\.\s+'                    # "1. " format
  - '^\s*\d+\.\s*\[\d+점\]'        # "1. [5점]" (with points)
  - '^\s*\d+\.\s*\(\d+점\)'        # "1. (5점)" (with points)
  - '^\s*\(\d+\)\s+'                  # "(1) " format
  - '^\s*\[\d+\]\s+'                  # "[1] " format
  - '^\s*\d+\)\s+'                    # "8) " format
  - '^\s*\d+\s+\.'                    # "1 ." format (space before dot)
  - '^\s*\d{1,3}\.\d{1,2}\.?\s+'      # "1.1." or "10.2" sub-numbered format

  # Korean format variations
  - '^\s*문제\s*\d+\s*[.:\)]'       # "문제 1:" or "문제 1)" format
  - '^\s*문\s*\d+\s*[.:\)]'           # "문 1:" shortened format
  - '^\s*제\s*\d+\s*문'             # "제 1 문" format
  - '^\s*\d+\s*번\s*[.:\)]?'          # "1번" or "1번." format
  - '^\s*\d+\s*번\s*문제'          # "1번 문제" format

  # English format variations
  - '^\s*Q\d+\s*[.:\)]'               # "Q1:" or "Q1." format
  - '^\s*Q\d+\s*$'                    # "Q2" standalone format
  - '^\s*Question\s*\d+'              # "Question 1" format
  - '^\s*Problem\s*\d+'               # "Problem 1" format

  # Special formats for exams
  - '^\s*\[\s*\d+\s*\]'              # "[ 1 ]" with spaces
  - '^\s*<\d+>'                        # "<1>" format
  - '^\s*※\s*\d+'                    # "※ 1" (with reference mark)
  - '^\s*▶\s*\d+'                    # "▶ 1" (with triangle)
  - '^\s*①'                          # "①" (circled numbers 1-20)

# Multiple choice markers
choice_markers:
  - ['①', '②', '③', '④', '⑤']           # Circle numbers
  - ['㉠', '㉡', '㉢', '㉣', '㉤']         # Circled Korean
  - ['1)', '2)', '3)', '4)', '5)']       # Numbers with parenthesis
  - ['(1)', '(2)', '(3)', '(4)', '(5)'] # Numbers in parenthesis
  - ['A.', 'B.', 'C.', 'D.', 'E.']     # Letters with dot
  - ['가.', '나.', '다.', '라.', '마.']   # Korean letters
  - ['ㄱ.', 'ㄴ.', 'ㄷ.', 'ㄹ.', 'ㅁ.'] # Korean consonants

# Answer key patterns
answer_patterns:
  - '정답\s*[:：]\s*([①②③④⑤㉠㉡㉢㉣㉤\d가-마ㄱ-ㅁA-E])'
  - '답\s*[:：]\s*([①②③④⑤㉠㉡㉢㉣㉤\d가-마ㄱ-ㅁA-E])'
  - 'Answer\s*[:：]\s*([①②③④⑤㉠㉡㉢㉣㉤\d가-마ㄱ-ㅁA-E])'
  - '정답은\s*([①②③④⑤㉠㉡㉢㉣㉤\d가-마ㄱ-ㅁA-E])'
  - '^Answer:\s*([A-E])\s*$'        # "Answer: C" format

# Explanation markers
explanation_markers:
  - '해설\s*[:：]'
  - '풀이\s*[:：]'
  - '설명\s*[:：]'
  - 'Explanation\s*[:：]'
  - 'Solution\s*[:：]'
  - '^설명[:：]*\s*'        # "설명:" or "설명" at start of line

# Text cleaning rules
header_footer_rules:
  - '^.*페이지.*$'          # Page numbers
  - '^.*쪽.*$'             # Page in Korean
  - '^.*Page\s+\d+.*$'     # Page in English
  - '^\s*\d+\s*$'          # Standalone numbers
  - '^.*Copyright.*$'      # Copyright notices
  - '^.*저작권.*$'         # Copyright in Korean
  - '^https?://.*$'        # URLs
  - '^.*examtopics\.com.*$' # Exam sites

# Difficulty indicators (optional)
difficulty_patterns:
  '★': 'easy'      # Easy (1 star)
  '★★': 'medium'   # Medium (2 stars)
  '★★★': 'hard'    # Hard (3 stars)

# Subject detection (optional)
subject_patterns:
  '수학': 'mathematics'
  '영어': 'english'
  '국어': 'korean'
  '과학': 'science'
  '사회': 'social_studies'
  '역사': 'history'
  '지리': 'geography'
  '물리': 'physics'
  '화학': 'chemistry'
  '생물': 'biology'

# Processing hints
hints:
  two_column: false              # Assume single column layout
  min_question_length: 5         # Reduced minimum for short questions
  max_choices: 10                # Increased for more complex problems
  min_choices: 2                 # Minimum number of choices
  case_sensitive_answers: false  # Answer matching is case insensitive
  max_lines_between_question_and_choices: 50  # Allow more space
  max_lines_per_problem: 100     # Increased for longer problems